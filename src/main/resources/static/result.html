<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì„ ê²°ê³¼ - Ctrl+Z</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            flex-direction: column;
        }
        .result-container {
            background-color: #34495e;
            padding: 30px 50px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            width: 80%;
            max-width: 600px;
            text-align: center;
        }
        h1 {
            color: #f1c40f;
            margin-bottom: 5px;
        }
        h2 {
            margin-bottom: 30px;
            font-size: 1.2rem;
            color: #bdc3c7;
        }
        .ranking-list {
            list-style: none;
            padding: 0;
        }
        .ranking-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background-color: #46627f;
            border-radius: 5px;
            font-size: 1.1rem;
        }
        .rank-number {
            font-weight: bold;
            color: #f1c40f;
            width: 30px;
        }
        .nickname {
            flex-grow: 1;
            text-align: left;
            margin-left: 20px;
        }
        .score {
            font-weight: bold;
            color: #ecf0f1;
        }
        .quit-btn {
            margin-top: 30px;
            padding: 10px 25px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        .quit-btn:hover {
            background-color: #c0392b;
        }
    </style>
</head>

<body>

<div class="result-container">
    <h1>ğŸ‰ ê²Œì„ ì¢…ë£Œ!</h1>
    <h2>ìµœì¢… ê²°ê³¼ ë­í‚¹</h2>

    <ul id="rankingList" class="ranking-list">
    </ul>

    <button class="quit-btn" onclick="goToLobby()">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<script>
    window.onload = function() {
        loadResults();
    };

    function loadResults() {
        // 1. sessionStorageì—ì„œ ì°¸ê°€ì ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        const storedData = sessionStorage.getItem('participants');
        let participants;

        try {
            participants = JSON.parse(storedData);
        } catch (e) {
            console.error("ê²°ê³¼ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", e);
            participants = [];
        }

        // 2. ì ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•©ë‹ˆë‹¤.
        if (participants && participants.length > 0) {
            participants.sort((a, b) => b.score - a.score);
        } else {
            document.getElementById('rankingList').innerHTML = '<li>ì°¸ê°€ì ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
            return;
        }

        const rankingList = document.getElementById('rankingList');
        rankingList.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

        // 3. ë­í‚¹ì„ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
        participants.forEach((p, index) => {
            const listItem = document.createElement('li');
            listItem.className = 'ranking-item';

            // ë­í‚¹ì— ë”°ë¼ ë°°ê²½ìƒ‰ ë˜ëŠ” ìŠ¤íƒ€ì¼ ë³€ê²½ ê°€ëŠ¥ (ì˜ˆ: 1ë“±)
            if (index === 0) {
                listItem.style.border = '2px solid #f1c40f';
            }

            listItem.innerHTML = `
                <span class="rank-number">${index + 1}</span>
                <span class="nickname">${p.nickname}</span>
                <span class="score">${p.score}ì </span>
            `;
            rankingList.appendChild(listItem);
        });
    }

    function goToLobby() {
        // ë¡œë¹„ë¡œ ì´ë™í•˜ë©´ì„œ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì˜ ì°¸ê°€ì ì •ë³´ëŠ” ì‚­ì œí•©ë‹ˆë‹¤.
        sessionStorage.removeItem('participants');
        location.href = 'lobby.html';
    }
</script>

</body>
</html>